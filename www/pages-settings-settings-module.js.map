{"version":3,"sources":["./src/addons/messages/pages/settings/settings.html","./src/addons/notifications/pages/settings/settings.html","./src/addons/messages/pages/settings/settings.module.ts","./src/addons/messages/pages/settings/settings.page.ts","./src/addons/notifications/pages/settings/settings.module.ts","./src/addons/notifications/pages/settings/settings.scss","./src/addons/notifications/pages/settings/settings.ts"],"names":[],"mappings":"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","file":"pages-settings-settings-module.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\n        </ion-buttons>\\n        <h1>{{ 'addon.messages.messages' | translate }}</h1>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!preferencesLoaded\\\" (ionRefresh)=\\\"refreshPreferences($event.target)\\\">\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\n    </ion-refresher>\\n    <core-loading [hideUntil]=\\\"preferencesLoaded\\\">\\n        <!-- Contactable privacy. -->\\n        <ion-card>\\n            <ion-item *ngIf=\\\"!advancedContactable\\\">\\n              <ion-label>{{ 'addon.messages.blocknoncontacts' | translate }}</ion-label>\\n              <ion-toggle [(ngModel)]=\\\"contactablePrivacy\\\" (ngModelChange)=\\\"saveContactablePrivacy(contactablePrivacy)\\\">\\n              </ion-toggle>\\n            </ion-item>\\n\\n            <ion-list *ngIf=\\\"advancedContactable\\\" class=\\\"ion-text-wrap\\\">\\n                <ion-radio-group [(ngModel)]=\\\"contactablePrivacy\\\" (ionChange)=\\\"saveContactablePrivacy(contactablePrivacy)\\\">\\n                    <ion-item-divider>\\n                        <ion-label><h2>{{ 'addon.messages.contactableprivacy' | translate }}</h2></ion-label>\\n                    </ion-item-divider>\\n                    <ion-item>\\n                        <ion-label>{{ 'addon.messages.contactableprivacy_onlycontacts' | translate }}</ion-label>\\n                        <ion-radio slot=\\\"start\\\" [value]=\\\"onlyContactsValue\\\"></ion-radio>\\n                    </ion-item>\\n                    <ion-item>\\n                        <ion-label>{{ 'addon.messages.contactableprivacy_coursemember' | translate }}</ion-label>\\n                        <ion-radio slot=\\\"start\\\" [value]=\\\"courseMemberValue\\\"></ion-radio>\\n                    </ion-item>\\n                    <ion-item *ngIf=\\\"allowSiteMessaging\\\">\\n                        <ion-label>{{ 'addon.messages.contactableprivacy_site' | translate }}</ion-label>\\n                        <ion-radio slot=\\\"start\\\" [value]=\\\"siteValue\\\"></ion-radio>\\n                    </ion-item>\\n                </ion-radio-group>\\n            </ion-list>\\n        </ion-card>\\n\\n        <!-- Notifications. -->\\n        <ng-container *ngIf=\\\"preferences\\\">\\n            <div *ngFor=\\\"let component of preferences.components\\\">\\n                <ion-card list *ngFor=\\\"let notification of component.notifications\\\">\\n                    <ion-item-divider class=\\\"ion-text-wrap\\\">\\n                        <ion-label>\\n                            <ion-row class=\\\"ion-no-padding\\\" *ngIf=\\\"!groupMessagingEnabled\\\">\\n                                <ion-col class=\\\"ion-no-padding\\\">\\n                                    <h2>{{ notification.displayname }}</h2>\\n                                </ion-col>\\n                                <ion-col size=\\\"2\\\" class=\\\"ion-text-center ion-no-padding ion-hide-md-down\\\">\\n                                    <h2>{{ 'core.settings.loggedin' | translate }}</h2>\\n                                </ion-col>\\n                                <ion-col *ngIf=\\\"!groupMessagingEnabled\\\" size=\\\"2\\\" class=\\\"ion-text-center ion-no-padding\\n                                    ion-hide-md-down\\\">\\n                                    <h2>{{ 'core.settings.loggedoff' | translate }}</h2>\\n                                </ion-col>\\n                            </ion-row>\\n                            <h2 *ngIf=\\\"groupMessagingEnabled\\\">{{ 'addon.notifications.notificationpreferences' | translate }}</h2>\\n                        </ion-label>\\n                    </ion-item-divider>\\n                    <ng-container *ngFor=\\\"let processor of notification.processors\\\">\\n                        <!-- If group messaging is enabled, display a simplified view. -->\\n                        <ng-container *ngIf=\\\"groupMessagingEnabled\\\">\\n                            <ion-item class=\\\"ion-text-wrap\\\">\\n                                <ion-label>{{ processor.displayname }}</ion-label>\\n                                <core-button-with-spinner\\n                                    *ngIf=\\\"!preferences.disableall\\\"\\n                                    [loading]=\\\"!!notification.updating\\\"\\n                                    slot=\\\"end\\\"\\n                                >\\n                                    <ion-toggle\\n                                        *ngIf=\\\"!processor.locked\\\"\\n                                        [(ngModel)]=\\\"processor.checked\\\"\\n                                        (ngModelChange)=\\\"changePreference(notification, '', processor)\\\"\\n                                    >\\n                                    </ion-toggle>\\n                                    <ion-note *ngIf=\\\"processor.locked\\\">\\n                                        {{ processor.lockedmessage }}\\n                                    </ion-note>\\n                                </core-button-with-spinner>\\n                                <ion-note slot=\\\"end\\\" *ngIf=\\\"preferences.disableall\\\">\\n                                    {{ 'core.settings.disabled' | translate }}\\n                                </ion-note>\\n                            </ion-item>\\n                        </ng-container>\\n\\n                        <ng-container *ngIf=\\\"!groupMessagingEnabled\\\">\\n                            <!-- Tablet view -->\\n                            <ion-row class=\\\"ion-text-wrap ion-hide-md-down ion-align-items-center\\\">\\n                                <ion-col class=\\\"ion-margin-horizontal\\\">{{ processor.displayname }}</ion-col>\\n                                <ion-col size=\\\"2\\\" class=\\\"ion-text-center\\\" *ngFor=\\\"let state of ['loggedin', 'loggedoff']\\\">\\n                                    <core-button-with-spinner\\n                                        *ngIf=\\\"!preferences.disableall\\\"\\n                                        [loading]=\\\"notification.updating && notification.updating[state]\\\"\\n                                    >\\n                                        <!-- If notifications not disabled, show toggle. -->\\n                                        <ion-toggle *ngIf=\\\"!processor.locked\\\"\\n                                            [(ngModel)]=\\\"processor[state].checked\\\"\\n                                            (ngModelChange)=\\\"changePreference(notification, state, processor)\\\"\\n                                        >\\n                                        </ion-toggle>\\n                                        <div class=\\\"ion-padding text-gray\\\" *ngIf=\\\"processor.locked\\\">\\n                                            {{'core.settings.locked' | translate }}\\n                                        </div>\\n                                    </core-button-with-spinner>\\n                                    <!-- If notifications are disabled, show \\\"Disabled\\\" instead of toggle. -->\\n                                    <span *ngIf=\\\"preferences.disableall\\\">{{ 'core.settings.disabled' | translate }}</span>\\n                                </ion-col>\\n                            </ion-row>\\n                            <!-- Phone view -->\\n                            <ion-list-header class=\\\"ion-text-wrap ion-hide-md-up\\\">\\n                                <ion-label>{{ processor.displayname }}</ion-label>\\n                            </ion-list-header>\\n                            <!-- If notifications not disabled, show toggles.\\n                                If notifications are disabled, show \\\"Disabled\\\" instead of toggle. -->\\n                            <ion-item *ngFor=\\\"let state of ['loggedin', 'loggedoff']\\\" class=\\\"ion-text-wrap ion-hide-md-up\\\">\\n                                <ion-label>{{ 'core.settings.' + state | translate }}</ion-label>\\n                                <core-button-with-spinner slot=\\\"end\\\"\\n                                    *ngIf=\\\"!preferences.disableall\\\"\\n                                    [loading]=\\\"notification.updating && notification.updating[state]\\\"\\n                                >\\n                                    <ion-toggle *ngIf=\\\"!processor.locked\\\"\\n                                        [(ngModel)]=\\\"processor[state].checked\\\"\\n                                        (ngModelChange)=\\\"changePreference(notification, state, processor)\\\"\\n                                    >\\n                                    </ion-toggle>\\n                                    <ion-note *ngIf=\\\"processor.locked\\\">\\n                                        {{'core.settings.locked' | translate }}\\n                                    </ion-note>\\n                                </core-button-with-spinner>\\n                                <ion-note slot=\\\"end\\\" *ngIf=\\\"preferences.disableall\\\">\\n                                    {{ 'core.settings.disabled' | translate }}\\n                                </ion-note>\\n                            </ion-item>\\n                        </ng-container>\\n                    </ng-container>\\n                </ion-card>\\n            </div>\\n        </ng-container>\\n\\n        <!-- General settings. -->\\n        <ion-card>\\n            <ion-list class=\\\"ion-text-wrap\\\">\\n                <ion-item-divider><ion-label><h2>{{ 'core.settings.general' | translate }}</h2></ion-label></ion-item-divider>\\n                <ion-item class=\\\"ion-text-wrap\\\">\\n                    <ion-label>\\n                        <p class=\\\"item-heading\\\">{{ 'addon.messages.useentertosend' | translate }}</p>\\n                    </ion-label>\\n                    <ion-toggle [(ngModel)]=\\\"sendOnEnter\\\" (ngModelChange)=\\\"sendOnEnterChanged()\\\" slot=\\\"end\\\"></ion-toggle>\\n                </ion-item>\\n            </ion-list>\\n        </ion-card>\\n    </core-loading>\\n</ion-content>\\n\";","export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\n        </ion-buttons>\\n        <h1>{{ 'addon.notifications.notifications' | translate }}</h1>\\n        <ion-buttons slot=\\\"end\\\">\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n<core-navbar-buttons slot=\\\"end\\\">\\n    <core-context-menu>\\n        <core-context-menu-item *ngFor=\\\"let handler of processorHandlers\\\" [priority]=\\\"handler.priority\\\"\\n            [content]=\\\"handler.label | translate\\\" (action)=\\\"openExtraPreferences(handler)\\\" [iconAction]=\\\"handler.icon\\\">\\n        </core-context-menu-item>\\n    </core-context-menu>\\n</core-navbar-buttons>\\n<ion-content>\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!preferencesLoaded || !notifPrefsEnabled\\\"\\n        (ionRefresh)=\\\"refreshPreferences($event.target)\\\">\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\n    </ion-refresher>\\n    <core-loading [hideUntil]=\\\"preferencesLoaded\\\">\\n        <!-- If notification preferences aren't enabled, show only the notification sound setting. -->\\n        <ion-item *ngIf=\\\"canChangeSound && !notifPrefsEnabled\\\">\\n            <ion-label>{{ 'addon.notifications.playsound' | translate }}</ion-label>\\n            <ion-toggle [(ngModel)]=\\\"notificationSound\\\" (ngModelChange)=\\\"changeNotificationSound(notificationSound)\\\"></ion-toggle>\\n        </ion-item>\\n\\n        <ng-container *ngIf=\\\"notifPrefsEnabled\\\">\\n            <ion-card>\\n                <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"preferences\\\">\\n                    <ion-label>{{ 'addon.notifications.notifications' | translate }}</ion-label>\\n                    <ion-toggle [(ngModel)]=\\\"preferences!.enableall\\\" (ngModelChange)=\\\"enableAll(preferences!.enableall)\\\"></ion-toggle>\\n                </ion-item>\\n                <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"canChangeSound\\\">\\n                    <ion-label>{{ 'addon.notifications.playsound' | translate }}</ion-label>\\n                    <ion-toggle [(ngModel)]=\\\"notificationSound\\\" (ngModelChange)=\\\"changeNotificationSound(notificationSound)\\\">\\n                    </ion-toggle>\\n                </ion-item>\\n            </ion-card>\\n\\n            <!-- Show processor selector. -->\\n            <core-combobox *ngIf=\\\"preferences && preferences.processors && preferences.processors.length > 0\\\"\\n                [selection]=\\\"currentProcessor!.name\\\" (onChange)=\\\"changeProcessor($event)\\\">\\n                <ion-select-option class=\\\"ion-text-wrap\\\" *ngFor=\\\"let processor of preferences.processors\\\" [value]=\\\"processor.name\\\">\\n                    {{ processor.displayname }}\\n                </ion-select-option>\\n            </core-combobox>\\n\\n            <ion-card list *ngFor=\\\"let component of components\\\" class=\\\"ion-margin-top\\\">\\n                <ion-item-divider class=\\\"ion-text-wrap\\\">\\n                    <ion-grid class=\\\"ion-no-padding\\\">\\n                        <ion-row class=\\\"ion-no-padding\\\">\\n                            <ion-col class=\\\"ion-no-padding\\\">{{ component.displayname }}</ion-col>\\n                            <ion-col size=\\\"2\\\" class=\\\"ion-text-center ion-no-padding ion-hide-md-down\\\">\\n                                {{ 'core.settings.loggedin' | translate }}\\n                            </ion-col>\\n                            <ion-col size=\\\"2\\\" class=\\\"ion-text-center ion-no-padding ion-hide-md-down\\\">\\n                                {{ 'core.settings.loggedoff' | translate }}\\n                            </ion-col>\\n                        </ion-row>\\n                    </ion-grid>\\n                </ion-item-divider>\\n                <ng-container *ngFor=\\\"let notification of component.notifications\\\">\\n                    <!-- Tablet view -->\\n                    <ion-grid class=\\\"ion-text-wrap ion-hide-md-down addon-notifications-table-content\\\">\\n                        <ion-row class=\\\"ion-align-items-center\\\">\\n                            <ion-col class=\\\"ion-margin-horizontal\\\">{{ notification.displayname }}</ion-col>\\n                            <ion-col size=\\\"2\\\" class=\\\"ion-text-center\\\" *ngFor=\\\"let state of ['loggedin', 'loggedoff']\\\">\\n                                <!-- If notifications enabled, show toggle. -->\\n                                <ion-spinner [hidden]=\\\"!preferences!.enableall ||\\n                                    !(notification.processorsByName[currentProcessor!.name][state] &&\\n                                    notification.processorsByName[currentProcessor!.name][state].updating)\\\">\\n                                </ion-spinner>\\n                                <ion-toggle\\n                                    *ngIf=\\\"preferences!.enableall && !notification.processorsByName[currentProcessor!.name].locked\\\"\\n                                    [(ngModel)]=\\\"notification.processorsByName[currentProcessor!.name][state].checked\\\"\\n                                    (ngModelChange)=\\\"changePreference(notification, state)\\\"\\n                                    [disabled]=\\\"notification.processorsByName[currentProcessor!.name][state].updating\\\">\\n                                </ion-toggle>\\n                                <span class=\\\"text-gray\\\"\\n                                    *ngIf=\\\"preferences!.enableall && notification.processorsByName[currentProcessor!.name].locked\\\">\\n                                    {{'core.settings.locked' | translate }}\\n                                </span>\\n                                <!-- If notifications are disabled, show \\\"Disabled\\\" instead of toggle. -->\\n                                <span *ngIf=\\\"!preferences!.enableall\\\">{{ 'core.settings.disabled' | translate }}</span>\\n                            </ion-col>\\n                        </ion-row>\\n                    </ion-grid>\\n\\n                    <!-- Phone view -->\\n                    <ion-list-header class=\\\"ion-text-wrap ion-no-margin ion-hide-md-up\\\">\\n                        {{ notification.displayname }}\\n                    </ion-list-header>\\n                    <!-- If notifications enabled, show toggles. If disabled, show \\\"Disabled\\\" instead of toggle. -->\\n                    <ion-item *ngFor=\\\"let state of ['loggedin', 'loggedoff']\\\" class=\\\"ion-text-wrap ion-hide-md-up\\\" lines=\\\"none\\\">\\n                        <ion-label>{{ 'core.settings.' + state | translate }}</ion-label>\\n                        <ion-spinner slot=\\\"end\\\"\\n                            *ngIf=\\\"preferences!.enableall && (notification.processorsByName[currentProcessor!.name][state] &&\\n                            notification.processorsByName[currentProcessor!.name][state].updating)\\\">\\n                        </ion-spinner>\\n                        <ion-toggle slot=\\\"end\\\"\\n                            *ngIf=\\\"preferences!.enableall && !notification.processorsByName[currentProcessor!.name].locked\\\"\\n                            [(ngModel)]=\\\"notification.processorsByName[currentProcessor!.name][state].checked\\\"\\n                            (ngModelChange)=\\\"changePreference(notification, state)\\\"\\n                            [disabled]=\\\"notification.processorsByName[currentProcessor!.name][state].updating\\\">\\n                        </ion-toggle>\\n                        <span slot=\\\"end\\\"\\n                            *ngIf=\\\"preferences!.enableall && notification.processorsByName[currentProcessor!.name].locked\\\"\\n                            class=\\\"text-gray\\\">\\n                            {{'core.settings.locked' | translate }}\\n                        </span>\\n                        <ion-note slot=\\\"end\\\" *ngIf=\\\"!preferences!.enableall\\\">{{ 'core.settings.disabled' | translate }}</ion-note>\\n                    </ion-item>\\n                </ng-container>\\n            </ion-card>\\n        </ng-container>\\n    </core-loading>\\n</ion-content>\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { CoreSharedModule } from '@/core/shared.module';\n\nimport { AddonMessagesSettingsPage } from './settings.page';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: AddonMessagesSettingsPage,\n    },\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forChild(routes),\n        CoreSharedModule,\n    ],\n    declarations: [\n        AddonMessagesSettingsPage,\n    ],\n    exports: [RouterModule],\n})\nexport class AddonMessagesSettingsPageModule {}\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n    AddonMessagesProvider, AddonMessagesMessagePreferences,\n    AddonMessagesMessagePreferencesNotification,\n    AddonMessagesMessagePreferencesNotificationProcessor,\n    AddonMessages,\n} from '../../services/messages';\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreApp } from '@services/app';\nimport { CoreConfig } from '@services/config';\nimport { CoreEvents } from '@singletons/events';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreConstants } from '@/core/constants';\nimport { IonRefresher } from '@ionic/angular';\n\n/**\n * Page that displays the messages settings page.\n */\n@Component({\n    selector: 'page-addon-messages-settings',\n    templateUrl: 'settings.html',\n})\nexport class AddonMessagesSettingsPage implements OnInit, OnDestroy {\n\n    protected updateTimeout?: number;\n\n    preferences?: AddonMessagesMessagePreferences;\n    preferencesLoaded = false;\n    contactablePrivacy?: number | boolean;\n    advancedContactable = false; // Whether the site supports \"advanced\" contactable privacy.\n    allowSiteMessaging = false;\n    onlyContactsValue = AddonMessagesProvider.MESSAGE_PRIVACY_ONLYCONTACTS;\n    courseMemberValue = AddonMessagesProvider.MESSAGE_PRIVACY_COURSEMEMBER;\n    siteValue = AddonMessagesProvider.MESSAGE_PRIVACY_SITE;\n    groupMessagingEnabled = false;\n    sendOnEnter = false;\n\n    protected previousContactableValue?: number | boolean;\n\n    constructor() {\n\n        const currentSite = CoreSites.getCurrentSite();\n        this.advancedContactable = !!currentSite?.isVersionGreaterEqualThan('3.6');\n        this.allowSiteMessaging = !!currentSite?.canUseAdvancedFeature('messagingallusers');\n        this.groupMessagingEnabled = AddonMessages.isGroupMessagingEnabled();\n\n        this.asyncInit();\n    }\n\n    protected async asyncInit(): Promise<void> {\n        this.sendOnEnter = !!(await CoreConfig.get(CoreConstants.SETTINGS_SEND_ON_ENTER, !CoreApp.isMobile()));\n    }\n\n    /**\n     * Runs when the page has loaded. This event only happens once per page being created.\n     * If a page leaves but is cached, then this event will not fire again on a subsequent viewing.\n     * Setup code for the page.\n     */\n    ngOnInit(): void {\n        this.fetchPreferences();\n    }\n\n    /**\n     * Fetches preference data.\n     *\n     * @return Promise resolved when done.\n     */\n    protected async fetchPreferences(): Promise<void> {\n        try {\n            const preferences = await AddonMessages.getMessagePreferences();\n            if (this.groupMessagingEnabled) {\n                // Simplify the preferences.\n                for (const component of preferences.components) {\n                    // Only display get the notification preferences.\n                    component.notifications = component.notifications.filter((notification) =>\n                        notification.preferencekey == AddonMessagesProvider.NOTIFICATION_PREFERENCES_KEY);\n\n                    component.notifications.forEach((notification) => {\n                        notification.processors.forEach(\n                            (processor: AddonMessagesMessagePreferencesNotificationProcessorFormatted) => {\n                                processor.checked = processor.loggedin.checked || processor.loggedoff.checked;\n                            },\n                        );\n                    });\n                }\n            }\n\n            this.preferences = preferences;\n            this.contactablePrivacy = preferences.blocknoncontacts;\n            this.previousContactableValue = this.contactablePrivacy;\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        } finally {\n            this.preferencesLoaded = true;\n        }\n    }\n\n    /**\n     * Update preferences. The purpose is to store the updated data, it won't be reflected in the view.\n     */\n    protected updatePreferences(): void {\n        AddonMessages.invalidateMessagePreferences().finally(() => {\n            this.fetchPreferences();\n        });\n    }\n\n    /**\n     * Update preferences after a certain time. The purpose is to store the updated data, it won't be reflected in the view.\n     */\n    protected updatePreferencesAfterDelay(): void {\n        // Cancel pending updates.\n        clearTimeout(this.updateTimeout);\n\n        this.updateTimeout = window.setTimeout(() => {\n            this.updateTimeout = undefined;\n            this.updatePreferences();\n        }, 5000);\n    }\n\n    /**\n     * Save the contactable privacy setting..\n     *\n     * @param value The value to set.\n     */\n    async saveContactablePrivacy(value?: number | boolean): Promise<void> {\n        if (this.contactablePrivacy == this.previousContactableValue) {\n            // Value hasn't changed from previous, it probably means that we just fetched the value from the server.\n            return;\n        }\n\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        if (!this.advancedContactable) {\n            // Convert from boolean to number.\n            value = value ? 1 : 0;\n        }\n\n        try {\n            await CoreUser.updateUserPreference('message_blocknoncontacts', String(value));\n            // Update the preferences since they were modified.\n            this.updatePreferencesAfterDelay();\n            this.previousContactableValue = this.contactablePrivacy;\n        } catch (message) {\n            // Show error and revert change.\n            CoreDomUtils.showErrorModal(message);\n            this.contactablePrivacy = this.previousContactableValue;\n        } finally {\n            modal.dismiss();\n        }\n    }\n\n    /**\n     * Change the value of a certain preference.\n     *\n     * @param notification Notification object.\n     * @param state State name, ['loggedin', 'loggedoff'].\n     * @param processor Notification processor.\n     */\n    async changePreference(\n        notification: AddonMessagesMessagePreferencesNotificationFormatted,\n        state: string,\n        processor: AddonMessagesMessagePreferencesNotificationProcessorFormatted,\n    ): Promise<void> {\n\n        const valueArray: string[] = [];\n        let value = 'none';\n\n        if (this.groupMessagingEnabled) {\n            // Update both states at the same time.\n            const promises: Promise<void>[] = [];\n\n            notification.processors.forEach((processor: AddonMessagesMessagePreferencesNotificationProcessorFormatted) => {\n                if (processor.checked) {\n                    valueArray.push(processor.name);\n                }\n            });\n\n            if (value.length > 0) {\n                value = valueArray.join(',');\n            }\n\n            notification.updating = true;\n\n            promises.push(CoreUser.updateUserPreference(notification.preferencekey + '_loggedin', value));\n            promises.push(CoreUser.updateUserPreference(notification.preferencekey + '_loggedoff', value));\n\n            try {\n                await Promise.all(promises);\n                // Update the preferences since they were modified.\n                this.updatePreferencesAfterDelay();\n            } catch (error) {\n                // Show error and revert change.\n                CoreDomUtils.showErrorModal(error);\n                processor.checked = !processor.checked;\n            } finally {\n                notification.updating = false;\n            }\n\n            return;\n        }\n\n        // Update only the specified state.\n        const processorState = processor[state];\n        const preferenceName = notification.preferencekey + '_' + processorState.name;\n\n        notification.processors.forEach((processor) => {\n            if (processor[state].checked) {\n                valueArray.push(processor.name);\n            }\n        });\n\n        if (value.length > 0) {\n            value = valueArray.join(',');\n        }\n\n        if (!notification.updating) {\n            notification.updating = {};\n        }\n\n        notification.updating[state] = true;\n        try {\n            await CoreUser.updateUserPreference(preferenceName, value);\n            // Update the preferences since they were modified.\n            this.updatePreferencesAfterDelay();\n        } catch (error) {\n            // Show error and revert change.\n            CoreDomUtils.showErrorModal(error);\n            processorState.checked = !processorState.checked;\n        } finally {\n            notification.updating[state] = false;\n        }\n    }\n\n    /**\n     * Refresh the list of preferences.\n     *\n     * @param refresher Refresher.\n     */\n    refreshPreferences(refresher?: IonRefresher): void {\n        AddonMessages.invalidateMessagePreferences().finally(() => {\n            this.fetchPreferences().finally(() => {\n                refresher?.complete();\n            });\n        });\n    }\n\n    sendOnEnterChanged(): void {\n        // Save the value.\n        CoreConfig.set(CoreConstants.SETTINGS_SEND_ON_ENTER, this.sendOnEnter ? 1 : 0);\n\n        // Notify the app.\n        CoreEvents.trigger(\n            CoreEvents.SEND_ON_ENTER_CHANGED,\n            { sendOnEnter: !!this.sendOnEnter },\n            CoreSites.getCurrentSiteId(),\n        );\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        // If there is a pending action to update preferences, execute it right now.\n        if (this.updateTimeout) {\n            clearTimeout(this.updateTimeout);\n            this.updatePreferences();\n        }\n    }\n\n}\n\n/**\n * Message preferences notification with some caclulated data.\n */\ntype AddonMessagesMessagePreferencesNotificationFormatted = AddonMessagesMessagePreferencesNotification & {\n    updating?: boolean | {[state: string]: boolean}; // Calculated in the app. Whether the notification is being updated.\n};\n\n/**\n * Message preferences notification processor with some caclulated data.\n */\ntype AddonMessagesMessagePreferencesNotificationProcessorFormatted = AddonMessagesMessagePreferencesNotificationProcessor & {\n    checked?: boolean; // Calculated in the app. Whether the processor is checked either for loggedin or loggedoff.\n};\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { CoreSharedModule } from '@/core/shared.module';\nimport { AddonNotificationsSettingsPage } from './settings';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: AddonNotificationsSettingsPage,\n    },\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forChild(routes),\n        CoreSharedModule,\n    ],\n    declarations: [\n        AddonNotificationsSettingsPage,\n    ],\n    exports: [RouterModule],\n})\nexport class AddonNotificationsSettingsPageModule {}\n","export default \":host .addon-notifications-table-content ion-row {\\n  min-height: 35px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hZGRvbnMvbm90aWZpY2F0aW9ucy9wYWdlcy9zZXR0aW5ncy9zZXR0aW5ncy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksZ0JBQUE7QUFBUiIsImZpbGUiOiJzcmMvYWRkb25zL25vdGlmaWNhdGlvbnMvcGFnZXMvc2V0dGluZ3Mvc2V0dGluZ3Muc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgICAuYWRkb24tbm90aWZpY2F0aW9ucy10YWJsZS1jb250ZW50IGlvbi1yb3cge1xuICAgICAgICBtaW4taGVpZ2h0OiAzNXB4O1xuICAgIH1cbn1cbiJdfQ== */\";","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { IonRefresher } from '@ionic/angular';\n\nimport { CoreConfig } from '@services/config';\nimport { CoreLocalNotifications } from '@services/local-notifications';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreUser } from '@features/user/services/user';\nimport { AddonMessageOutputDelegate, AddonMessageOutputHandlerData } from '@addons/messageoutput/services/messageoutput-delegate';\nimport { CoreConstants } from '@/core/constants';\nimport { CoreError } from '@classes/errors/error';\nimport { CoreEvents } from '@singletons/events';\nimport {\n    AddonNotifications,\n    AddonNotificationsPreferencesProcessor,\n    AddonNotificationsPreferencesNotificationProcessorState,\n} from '../../services/notifications';\nimport {\n    AddonNotificationsHelper,\n    AddonNotificationsPreferencesComponentFormatted,\n    AddonNotificationsPreferencesFormatted,\n    AddonNotificationsPreferencesNotificationFormatted,\n    AddonNotificationsPreferencesProcessorFormatted,\n} from '@addons/notifications/services/notifications-helper';\nimport { CoreNavigator } from '@services/navigator';\n\n/**\n * Page that displays notifications settings.\n */\n@Component({\n    selector: 'page-addon-notifications-settings',\n    templateUrl: 'settings.html',\n    styleUrls: ['settings.scss'],\n})\nexport class AddonNotificationsSettingsPage implements OnInit, OnDestroy {\n\n    preferences?: AddonNotificationsPreferencesFormatted;\n    components?: AddonNotificationsPreferencesComponentFormatted[];\n    currentProcessor?: AddonNotificationsPreferencesProcessor;\n    preferencesLoaded = false;\n    notificationSound = false;\n    notifPrefsEnabled: boolean;\n    canChangeSound: boolean;\n    processorHandlers: AddonMessageOutputHandlerData[] = [];\n\n    protected updateTimeout?: number;\n\n    constructor() {\n        this.notifPrefsEnabled = AddonNotifications.isNotificationPreferencesEnabled();\n        this.canChangeSound = CoreLocalNotifications.canDisableSound();\n    }\n\n    /**\n     * Component being initialized.\n     */\n    async ngOnInit(): Promise<void> {\n        if (this.canChangeSound) {\n            this.notificationSound = await CoreConfig.get<boolean>(CoreConstants.SETTINGS_NOTIFICATION_SOUND, true);\n        }\n\n        if (this.notifPrefsEnabled) {\n            this.fetchPreferences();\n        } else {\n            this.preferencesLoaded = true;\n        }\n    }\n\n    /**\n     * Fetches preferences data.\n     *\n     * @return Resolved when done.\n     */\n    protected async fetchPreferences(): Promise<void> {\n        try {\n            const preferences = await AddonNotifications.getNotificationPreferences();\n\n            if (!this.currentProcessor) {\n                // Initialize current processor. Load \"Mobile\" (airnotifier) if available.\n                this.currentProcessor = AddonNotificationsHelper.getProcessor(preferences.processors, 'airnotifier');\n            }\n\n            if (!this.currentProcessor) {\n                // Shouldn't happen.\n                throw new CoreError('No processor found');\n            }\n\n            preferences.enableall = !preferences.disableall;\n            this.preferences = AddonNotificationsHelper.formatPreferences(preferences);\n            this.loadProcessor(this.currentProcessor);\n\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        } finally {\n            this.preferencesLoaded = true;\n        }\n    }\n\n    /**\n     * Load a processor.\n     *\n     * @param processor Processor object.\n     */\n    protected loadProcessor(processor: AddonNotificationsPreferencesProcessorFormatted): void {\n        if (!processor) {\n            return;\n        }\n\n        this.currentProcessor = processor;\n        this.processorHandlers = [];\n        this.components = AddonNotificationsHelper.getProcessorComponents(\n            processor.name,\n            this.preferences?.components || [],\n        );\n\n        if (!processor.hassettings || !processor.supported) {\n            return;\n        }\n\n        const handlerData = AddonMessageOutputDelegate.getDisplayData(processor);\n        if (handlerData) {\n            this.processorHandlers.push(handlerData);\n        }\n    }\n\n    /**\n     * Update preferences after a certain time. The purpose is to store the updated data, it won't be reflected in the view.\n     */\n    protected updatePreferencesAfterDelay(): void {\n        // Cancel pending updates.\n        clearTimeout(this.updateTimeout);\n\n        this.updateTimeout = window.setTimeout(() => {\n            this.updateTimeout = undefined;\n            this.updatePreferences();\n        }, 5000);\n    }\n\n    /**\n     * Update preferences. The purpose is to store the updated data, it won't be reflected in the view.\n     *\n     * @return Promise resolved when done.\n     */\n    protected async updatePreferences(): Promise<void> {\n        await CoreUtils.ignoreErrors(AddonNotifications.invalidateNotificationPreferences());\n\n        await AddonNotifications.getNotificationPreferences();\n    }\n\n    /**\n     * The selected processor was changed.\n     *\n     * @param name Name of the selected processor.\n     */\n    changeProcessor(name: string): void {\n        const processor = this.preferences!.processors.find((processor) => processor.name == name);\n\n        if (processor) {\n            this.loadProcessor(processor);\n        }\n    }\n\n    /**\n     * Refresh the list of preferences.\n     *\n     * @param refresher Refresher.\n     */\n    async refreshPreferences(refresher?: IonRefresher): Promise<void> {\n        try {\n            await CoreUtils.ignoreErrors(AddonNotifications.invalidateNotificationPreferences());\n\n            await this.fetchPreferences();\n        } finally {\n            refresher?.complete();\n        }\n    }\n\n    /**\n     * Open extra preferences.\n     *\n     * @param handlerData\n     */\n    openExtraPreferences(handlerData: AddonMessageOutputHandlerData): void {\n        CoreNavigator.navigateToSitePath(handlerData.page, { params: handlerData.pageParams });\n    }\n\n    /**\n     * Change the value of a certain preference.\n     *\n     * @param notification Notification object.\n     * @param state State name, ['loggedin', 'loggedoff'].\n     * @return Promise resolved when done.\n     */\n    async changePreference(notification: AddonNotificationsPreferencesNotificationFormatted, state: string): Promise<void> {\n        const processor = notification.processorsByName?.[this.currentProcessor?.name || ''];\n        if (!processor) {\n            return;\n        }\n\n        const processorState: ProcessorStateFormatted = processor[state];\n        const preferenceName = notification.preferencekey + '_' + processorState.name;\n        let value: string | undefined;\n\n        notification.processors.forEach((processor) => {\n            if (processor[state].checked) {\n                if (!value) {\n                    value = processor.name;\n                } else {\n                    value += ',' + processor.name;\n                }\n            }\n        });\n\n        if (!value) {\n            value = 'none';\n        }\n\n        processorState.updating = true;\n\n        try {\n            await CoreUser.updateUserPreference(preferenceName, value);\n\n            // Update the preferences since they were modified.\n            this.updatePreferencesAfterDelay();\n        } catch (error) {\n            // Show error and revert change.\n            CoreDomUtils.showErrorModal(error);\n            processor[state].checked = !processor[state].checked;\n        } finally {\n            processorState.updating = false;\n        }\n    }\n\n    /**\n     * Enable all notifications changed.\n     *\n     * @param enable Whether to enable or disable.\n     * @return Promise resolved when done.\n     */\n    async enableAll(enable?: boolean): Promise<void> {\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        try {\n            CoreUser.updateUserPreferences([], !enable);\n\n            // Update the preferences since they were modified.\n            this.updatePreferencesAfterDelay();\n        } catch (error) {\n            // Show error and revert change.\n            CoreDomUtils.showErrorModal(error);\n            this.preferences!.enableall = !this.preferences!.enableall;\n        } finally {\n            modal.dismiss();\n        }\n    }\n\n    /**\n     * Change the notification sound setting.\n     *\n     * @param enabled True to enable the notification sound, false to disable it.\n     */\n    async changeNotificationSound(enabled: boolean): Promise<void> {\n        await CoreUtils.ignoreErrors(CoreConfig.set(CoreConstants.SETTINGS_NOTIFICATION_SOUND, enabled ? 1 : 0));\n\n        const siteId = CoreSites.getCurrentSiteId();\n        CoreEvents.trigger(CoreEvents.NOTIFICATION_SOUND_CHANGED, { enabled }, siteId);\n        CoreLocalNotifications.rescheduleAll();\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        // If there is a pending action to update preferences, execute it right now.\n        if (this.updateTimeout) {\n            clearTimeout(this.updateTimeout);\n            this.updatePreferences();\n        }\n    }\n\n}\n\n/**\n * State in notification processor in notification preferences component with some calculated data.\n */\ntype ProcessorStateFormatted = AddonNotificationsPreferencesNotificationProcessorState & {\n    updating?: boolean; // Calculated in the app. Whether the state is being updated.\n};\n"],"sourceRoot":"webpack:///"}