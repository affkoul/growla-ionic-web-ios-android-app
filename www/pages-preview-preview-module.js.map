{"version":3,"sources":["./src/core/features/course/pages/preview/preview.html","./src/core/features/course/pages/preview/preview.module.ts","./src/core/features/course/pages/preview/preview.page.ts","./src/core/features/course/pages/preview/preview.scss"],"names":[],"mappings":"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","file":"pages-preview-preview-module.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\n        </ion-buttons>\\n        <h1>\\n            <core-format-text [text]=\\\"course?.fullname\\\" contextLevel=\\\"course\\\" [contextInstanceId]=\\\"course?.id\\\"></core-format-text>\\n        </h1>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!dataLoaded\\\" (ionRefresh)=\\\"refreshData($event.target)\\\">\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\n    </ion-refresher>\\n    <core-loading [hideUntil]=\\\"dataLoaded\\\">\\n        <div *ngIf=\\\"courseImageUrl\\\" class=\\\"core-course-thumb-parallax\\\">\\n            <div (click)=\\\"openCourse()\\\" class=\\\"core-course-thumb\\\">\\n                <img [src]=\\\"courseImageUrl\\\" core-external-content alt=\\\"\\\"/>\\n            </div>\\n        </div>\\n        <div class=\\\"core-course-thumb-parallax-content\\\" *ngIf=\\\"course\\\">\\n            <ion-item class=\\\"ion-text-wrap\\\" (click)=\\\"openCourse()\\\" [attr.aria-label]=\\\"course.fullname\\\"\\n                [detail]=\\\"!avoidOpenCourse && canAccessCourse\\\" [button]=\\\"!avoidOpenCourse && canAccessCourse\\\">\\n                <ion-icon name=\\\"fas-graduation-cap\\\" fixed-width slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\n                <ion-label>\\n                    <h2>\\n                        <core-format-text [text]=\\\"course.fullname\\\" contextLevel=\\\"course\\\" [contextInstanceId]=\\\"course.id\\\">\\n                        </core-format-text>\\n                    </h2>\\n                    <p *ngIf=\\\"course.categoryname\\\"><core-format-text [text]=\\\"course.categoryname\\\"\\n                        contextLevel=\\\"coursecat\\\" [contextInstanceId]=\\\"course.categoryid\\\"></core-format-text></p>\\n                    <p *ngIf=\\\"course.startdate\\\">\\n                        {{course.startdate * 1000 | coreFormatDate:\\\"strftimedatefullshort\\\" }}\\n                        <span *ngIf=\\\"course.enddate\\\"> - {{course.enddate * 1000 | coreFormatDate:\\\"strftimedatefullshort\\\" }}</span>\\n                    </p>\\n                </ion-label>\\n            </ion-item>\\n\\n            <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"course.summary\\\" detail=\\\"false\\\">\\n                <ion-label>\\n                    <core-format-text [text]=\\\"course.summary\\\" maxHeight=\\\"120\\\" contextLevel=\\\"course\\\" [contextInstanceId]=\\\"course.id\\\">\\n                    </core-format-text>\\n                </ion-label>\\n            </ion-item>\\n\\n            <ng-container class=\\\"ion-text-wrap\\\" *ngIf=\\\"course.contacts && course.contacts.length\\\">\\n                <ion-item-divider>\\n                    <ion-label>\\n                        <h2>{{ 'core.teachers' | translate }}</h2>\\n                    </ion-label>\\n                </ion-item-divider>\\n                <ion-item class=\\\"ion-text-wrap\\\" *ngFor=\\\"let contact of course.contacts\\\" core-user-link [userId]=\\\"contact.id\\\"\\n                    [courseId]=\\\"isEnrolled ? course.id : null\\\" [attr.aria-label]=\\\"'core.viewprofile' | translate\\\" detail=\\\"true\\\">\\n                    <core-user-avatar [user]=\\\"contact\\\" slot=\\\"start\\\" [userId]=\\\"contact.id\\\"\\n                        [courseId]=\\\"isEnrolled ? course.id : null\\\">\\n                    </core-user-avatar>\\n                    <ion-label>\\n                        <p class=\\\"item-heading\\\">{{contact.fullname}}</p>\\n                    </ion-label>\\n                </ion-item>\\n                <core-spacer></core-spacer>\\n            </ng-container>\\n\\n            <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"course.customfields\\\">\\n                <ion-label>\\n                <ng-container *ngFor=\\\"let field of course.customfields\\\">\\n                    <div *ngIf=\\\"field.value\\\"\\n                        class=\\\"core-customfield core-customfield_{{field.type}} core-customfield_{{field.shortname}}\\\">\\n                        <span class=\\\"core-customfieldname\\\">\\n                            <core-format-text [text]=\\\"field.name\\\" contextLevel=\\\"course\\\" [contextInstanceId]=\\\"course.id\\\">\\n                            </core-format-text>\\n                        </span><span class=\\\"core-customfieldseparator\\\">: </span>\\n                        <span class=\\\"core-customfieldvalue\\\">\\n                            <core-format-text [text]=\\\"field.value\\\" maxHeight=\\\"120\\\" contextLevel=\\\"course\\\"\\n                            [contextInstanceId]=\\\"course.id\\\">\\n                            </core-format-text>\\n                        </span>\\n                    </div>\\n                </ng-container>\\n                </ion-label>\\n            </ion-item>\\n\\n            <div *ngIf=\\\"!isEnrolled\\\" detail=\\\"false\\\">\\n                <ion-item class=\\\"ion-text-wrap\\\" *ngFor=\\\"let instance of selfEnrolInstances\\\">\\n                    <ion-label>\\n                        <p class=\\\"item-heading\\\">{{ instance.name }}</p>\\n                        <ion-button expand=\\\"block\\\" class=\\\"ion-margin-top\\\" (click)=\\\"selfEnrolClicked(instance.id)\\\">\\n                            {{ 'core.courses.enrolme' | translate }}\\n                        </ion-button>\\n                    </ion-label>\\n                </ion-item>\\n            </div>\\n            <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"!isEnrolled && paypalEnabled\\\">\\n                <ion-label>\\n                    <h2>{{ 'core.courses.paypalaccepted' | translate }}</h2>\\n                    <p>{{ 'core.paymentinstant' | translate }}</p>\\n                    <ion-button expand=\\\"block\\\" class=\\\"ion-margin-top\\\" (click)=\\\"paypalEnrol()\\\" *ngIf=\\\"isMobile\\\">\\n                        {{ 'core.courses.sendpaymentbutton' | translate }}\\n                    </ion-button>\\n                </ion-label>\\n            </ion-item>\\n            <ion-item *ngIf=\\\"!isEnrolled && !selfEnrolInstances.length && !paypalEnabled\\\">\\n                <ion-label><p>{{ 'core.courses.notenrollable' | translate }}</p></ion-label>\\n            </ion-item>\\n            <ion-item *ngIf=\\\"canAccessCourse && downloadCourseEnabled\\\" (click)=\\\"prefetchCourse()\\\" detail=\\\"false\\\"\\n                    [attr.aria-label]=\\\"prefetchCourseData.statusTranslatable | translate\\\" button>\\n                <ion-icon *ngIf=\\\"(prefetchCourseData.status != statusDownloaded) && !prefetchCourseData.loading\\\"\\n                    [name]=\\\"prefetchCourseData.icon\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\">\\n                </ion-icon>\\n                <ion-icon *ngIf=\\\"(prefetchCourseData.status == statusDownloaded) && !prefetchCourseData.loading\\\"\\n                    slot=\\\"start\\\" [name]=\\\"prefetchCourseData.icon\\\" color=\\\"success\\\"\\n                    aria-hidden=\\\"true\\\" role=\\\"status\\\">\\n                </ion-icon>\\n                <ion-spinner *ngIf=\\\"prefetchCourseData.loading\\\" slot=\\\"start\\\"\\n                    [attr.aria-label]=\\\"'core.loading' | translate\\\"></ion-spinner>\\n                <ion-label><h2>{{ 'core.course.downloadcourse' | translate }}</h2></ion-label>\\n            </ion-item>\\n            <ion-item button (click)=\\\"openCourse()\\\" [attr.aria-label]=\\\"course.fullname\\\" *ngIf=\\\"!avoidOpenCourse && canAccessCourse\\\"\\n                detail=\\\"true\\\">\\n                <ion-icon name=\\\"fas-briefcase\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\n                <ion-label><h2>{{ 'core.course.contents' | translate }}</h2></ion-label>\\n            </ion-item>\\n            <ion-item [href]=\\\"courseUrl\\\" core-link [attr.aria-label]=\\\"course.fullname\\\" button detail=\\\"false\\\">\\n                <ion-icon name=\\\"fas-external-link-alt\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\n                <ion-label><h2>{{ 'core.openinbrowser' | translate }}</h2></ion-label>\\n            </ion-item>\\n        </div>\\n    </core-loading>\\n</ion-content>\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { CoreSharedModule } from '@/core/shared.module';\nimport { CoreCoursePreviewPage } from './preview.page';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: CoreCoursePreviewPage,\n    },\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forChild(routes),\n        CoreSharedModule,\n    ],\n    declarations: [\n        CoreCoursePreviewPage,\n    ],\n    exports: [RouterModule],\n})\nexport class CoreCoursePreviewPageModule { }\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, NgZone, OnInit } from '@angular/core';\nimport { IonRefresher } from '@ionic/angular';\nimport { CoreApp } from '@services/app';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport {\n    CoreCourseEnrolmentMethod,\n    CoreCourseGetCoursesData,\n    CoreCourses,\n    CoreCourseSearchedData,\n    CoreCoursesProvider,\n    CoreEnrolledCourseData,\n} from '@features/courses/services/courses';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { CoreCourse, CoreCourseProvider } from '@features/course/services/course';\nimport { CoreCourseHelper, CorePrefetchStatusInfo } from '@features/course/services/course-helper';\nimport { Translate } from '@singletons';\nimport { CoreConstants } from '@/core/constants';\nimport { CoreCoursesSelfEnrolPasswordComponent } from '../../../courses/components/self-enrol-password/self-enrol-password';\nimport { CoreNavigator } from '@services/navigator';\n\n/**\n * Page that allows \"previewing\" a course and enrolling in it if enabled and not enrolled.\n */\n@Component({\n    selector: 'page-core-course-preview',\n    templateUrl: 'preview.html',\n    styleUrls: ['preview.scss'],\n})\nexport class CoreCoursePreviewPage implements OnInit, OnDestroy {\n\n    course?: CoreCourseSearchedData;\n    isEnrolled = false;\n    canAccessCourse = true;\n    selfEnrolInstances: CoreCourseEnrolmentMethod[] = [];\n    paypalEnabled = false;\n    dataLoaded = false;\n    avoidOpenCourse = false;\n    prefetchCourseData: CorePrefetchStatusInfo = {\n        icon: '',\n        statusTranslatable: 'core.loading',\n        status: '',\n        loading: true,\n    };\n\n    statusDownloaded = CoreConstants.DOWNLOADED;\n\n    downloadCourseEnabled: boolean;\n    courseUrl = '';\n    courseImageUrl?: string;\n    isMobile: boolean;\n\n    protected isGuestEnabled = false;\n    protected guestInstanceId?: number;\n    protected enrolmentMethods: CoreCourseEnrolmentMethod[] = [];\n    protected waitStart = 0;\n    protected enrolUrl = '';\n    protected paypalReturnUrl = '';\n    protected pageDestroyed = false;\n    protected courseStatusObserver?: CoreEventObserver;\n\n    constructor(\n        protected zone: NgZone,\n    ) {\n        this.isMobile = CoreApp.isMobile();\n        this.downloadCourseEnabled = !CoreCourses.isDownloadCourseDisabledInSite();\n\n        if (this.downloadCourseEnabled) {\n            // Listen for status change in course.\n            this.courseStatusObserver = CoreEvents.on(CoreEvents.COURSE_STATUS_CHANGED, (data) => {\n                if (data.courseId == this.course!.id || data.courseId == CoreCourseProvider.ALL_COURSES_CLEARED) {\n                    this.updateCourseStatus(data.status);\n                }\n            }, CoreSites.getCurrentSiteId());\n        }\n    }\n\n    /**\n     * View loaded.\n     */\n    async ngOnInit(): Promise<void> {\n        this.course = CoreNavigator.getRouteParam('course');\n        this.avoidOpenCourse = !!CoreNavigator.getRouteBooleanParam('avoidOpenCourse');\n\n        if (!this.course) {\n            CoreNavigator.back();\n\n            return;\n        }\n\n        const currentSite = CoreSites.getCurrentSite();\n        const currentSiteUrl = currentSite && currentSite.getURL();\n\n        this.paypalEnabled = this.course!.enrollmentmethods?.indexOf('paypal') > -1;\n        this.enrolUrl = CoreTextUtils.concatenatePaths(currentSiteUrl!, 'enrol/index.php?id=' + this.course!.id);\n        this.courseUrl = CoreTextUtils.concatenatePaths(currentSiteUrl!, 'course/view.php?id=' + this.course!.id);\n        this.paypalReturnUrl = CoreTextUtils.concatenatePaths(currentSiteUrl!, 'enrol/paypal/return.php');\n        if (this.course.overviewfiles.length > 0) {\n            this.courseImageUrl = this.course.overviewfiles[0].fileurl;\n        }\n\n        try {\n            await this.getCourse();\n        } finally {\n            if (this.downloadCourseEnabled) {\n\n                // Determine course prefetch icon.\n                this.prefetchCourseData = await CoreCourseHelper.getCourseStatusIconAndTitle(this.course!.id);\n\n                if (this.prefetchCourseData.loading) {\n                    // Course is being downloaded. Get the download promise.\n                    const promise = CoreCourseHelper.getCourseDownloadPromise(this.course!.id);\n                    if (promise) {\n                        // There is a download promise. If it fails, show an error.\n                        promise.catch((error) => {\n                            if (!this.pageDestroyed) {\n                                CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n                            }\n                        });\n                    } else {\n                        // No download, this probably means that the app was closed while downloading. Set previous status.\n                        CoreCourse.setCoursePreviousStatus(this.course!.id);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Check if the user can access as guest.\n     *\n     * @return Promise resolved if can access as guest, rejected otherwise. Resolve param indicates if\n     *         password is required for guest access.\n     */\n    protected async canAccessAsGuest(): Promise<boolean> {\n        if (!this.isGuestEnabled) {\n            throw Error('Guest access is not enabled.');\n        }\n\n        // Search instance ID of guest enrolment method.\n        const method = this.enrolmentMethods.find((method) => method.type == 'guest');\n        this.guestInstanceId = method?.id;\n\n        if (this.guestInstanceId) {\n            const info = await CoreCourses.getCourseGuestEnrolmentInfo(this.guestInstanceId);\n            if (!info.status) {\n                // Not active, reject.\n                throw Error('Guest access is not enabled.');\n            }\n\n            return info.passwordrequired;\n        }\n\n        throw Error('Guest enrollment method not found.');\n    }\n\n    /**\n     * Convenience function to get course. We use this to determine if a user can see the course or not.\n     */\n    protected async getCourse(): Promise<void> {\n        // Get course enrolment methods.\n        this.selfEnrolInstances = [];\n\n        try {\n            this.enrolmentMethods = await CoreCourses.getCourseEnrolmentMethods(this.course!.id);\n\n            this.enrolmentMethods.forEach((method) => {\n                if (method.type === 'self') {\n                    this.selfEnrolInstances.push(method);\n                } else if (method.type === 'guest') {\n                    this.isGuestEnabled = true;\n                }\n            });\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error getting enrolment data');\n        }\n\n        try {\n            let course: CoreEnrolledCourseData | CoreCourseGetCoursesData;\n\n            // Check if user is enrolled in the course.\n            try {\n                course = await CoreCourses.getUserCourse(this.course!.id);\n                this.isEnrolled = true;\n            } catch {\n                // The user is not enrolled in the course. Use getCourses to see if it's an admin/manager and can see the course.\n                this.isEnrolled = false;\n\n                course = await CoreCourses.getCourse(this.course!.id);\n            }\n\n            // Success retrieving the course, we can assume the user has permissions to view it.\n            this.course!.fullname = course.fullname || this.course!.fullname;\n            this.course!.summary = course.summary || this.course!.summary;\n            this.canAccessCourse = true;\n        } catch {\n            // The user is not an admin/manager. Check if we can provide guest access to the course.\n            try {\n                this.canAccessCourse = !(await this.canAccessAsGuest());\n            } catch {\n                this.canAccessCourse = false;\n            }\n        }\n\n        if (!CoreSites.getCurrentSite()?.isVersionGreaterEqualThan('3.7')) {\n            try {\n                const available = await CoreCourses.isGetCoursesByFieldAvailableInSite();\n                if (available) {\n                    const course = await CoreCourses.getCourseByField('id', this.course!.id);\n\n                    this.course!.customfields = course.customfields;\n                }\n            } catch {\n                // Ignore errors.\n            }\n        }\n\n        this.dataLoaded = true;\n    }\n\n    /**\n     * Open the course.\n     */\n    openCourse(): void {\n        if (!this.canAccessCourse || this.avoidOpenCourse) {\n            // Course cannot be opened or we are avoiding opening because we accessed from inside a course.\n            return;\n        }\n\n        CoreCourseHelper.openCourse(this.course!);\n    }\n\n    /**\n     * Enrol using PayPal.\n     */\n    async paypalEnrol(): Promise<void> {\n        // We cannot control browser in browser.\n        if (!this.isMobile || !CoreSites.getCurrentSite()) {\n            return;\n        }\n\n        let hasReturnedFromPaypal = false;\n\n        const urlLoaded = (event: InAppBrowserEvent): void => {\n            if (event.url.indexOf(this.paypalReturnUrl) != -1) {\n                hasReturnedFromPaypal = true;\n            } else if (event.url.indexOf(this.courseUrl) != -1 && hasReturnedFromPaypal) {\n                // User reached the course index page after returning from PayPal, close the InAppBrowser.\n                inAppClosed();\n                window.close();\n            }\n        };\n        const inAppClosed = (): void => {\n            // InAppBrowser closed, refresh data.\n            unsubscribeAll();\n\n            if (!this.dataLoaded) {\n                return;\n            }\n            this.dataLoaded = false;\n            this.refreshData();\n        };\n        const unsubscribeAll = (): void => {\n            inAppLoadSubscription?.unsubscribe();\n            inAppExitSubscription?.unsubscribe();\n        };\n\n        // Open the enrolment page in InAppBrowser.\n        const window = await CoreSites.getCurrentSite()!.openInAppWithAutoLogin(this.enrolUrl);\n\n        // Observe loaded pages in the InAppBrowser to check if the enrol process has ended.\n        const inAppLoadSubscription = window.on('loadstart').subscribe((event) => {\n            // Execute the callback in the Angular zone, so change detection doesn't stop working.\n            this.zone.run(() => urlLoaded(event));\n        });\n        // Observe window closed.\n        const inAppExitSubscription = window.on('exit').subscribe(() => {\n            // Execute the callback in the Angular zone, so change detection doesn't stop working.\n            this.zone.run(inAppClosed);\n        });\n    }\n\n    /**\n     * User clicked in a self enrol button.\n     *\n     * @param instanceId The instance ID of the enrolment method.\n     */\n    async selfEnrolClicked(instanceId: number): Promise<void> {\n        try {\n            await CoreDomUtils.showConfirm(Translate.instant('core.courses.confirmselfenrol'));\n\n            this.selfEnrolInCourse('', instanceId);\n        } catch {\n            // User cancelled.\n        }\n    }\n\n    /**\n     * Self enrol in a course.\n     *\n     * @param password Password to use.\n     * @param instanceId The instance ID.\n     * @return Promise resolved when self enrolled.\n     */\n    async selfEnrolInCourse(password: string, instanceId: number): Promise<void> {\n        const modal = await CoreDomUtils.showModalLoading('core.loading', true);\n\n        try {\n            await CoreCourses.selfEnrol(this.course!.id, password, instanceId);\n\n            // Close modal and refresh data.\n            this.isEnrolled = true;\n            this.dataLoaded = false;\n\n            // Sometimes the list of enrolled courses takes a while to be updated. Wait for it.\n            await this.waitForEnrolled(true);\n\n            await this.refreshData().finally(() => {\n                // My courses have been updated, trigger event.\n                CoreEvents.trigger(CoreCoursesProvider.EVENT_MY_COURSES_UPDATED, {\n                    courseId: this.course!.id,\n                    course: this.course,\n                    action: CoreCoursesProvider.ACTION_ENROL,\n                }, CoreSites.getCurrentSiteId());\n            });\n\n            this.openCourse();\n\n            modal?.dismiss();\n        } catch (error) {\n            modal?.dismiss();\n\n            if (error && error.errorcode === CoreCoursesProvider.ENROL_INVALID_KEY) {\n                // Initialize the self enrol modal.\n                // Invalid password, show the modal to enter the password.\n                const modalData = await CoreDomUtils.openModal<string>(\n                    {\n                        component: CoreCoursesSelfEnrolPasswordComponent,\n                        componentProps: { password },\n                    },\n                );\n\n                if (typeof modalData != 'undefined') {\n                    this.selfEnrolInCourse(modalData, instanceId);\n\n                    return;\n                }\n\n                if (!password) {\n                    // No password entered, don't show error.\n                    return;\n                }\n            }\n\n            CoreDomUtils.showErrorModalDefault(error, 'core.courses.errorselfenrol', true);\n        }\n    }\n\n    /**\n     * Refresh the data.\n     *\n     * @param refresher The refresher if this was triggered by a Pull To Refresh.\n     */\n    async refreshData(refresher?: IonRefresher): Promise<void> {\n        const promises: Promise<void>[] = [];\n\n        promises.push(CoreCourses.invalidateUserCourses());\n        promises.push(CoreCourses.invalidateCourse(this.course!.id));\n        promises.push(CoreCourses.invalidateCourseEnrolmentMethods(this.course!.id));\n        promises.push(CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions(this.course!.id));\n        if (CoreSites.getCurrentSite() && !CoreSites.getCurrentSite()!.isVersionGreaterEqualThan('3.7')) {\n            promises.push(CoreCourses.invalidateCoursesByField('id', this.course!.id));\n        }\n        if (this.guestInstanceId) {\n            promises.push(CoreCourses.invalidateCourseGuestEnrolmentInfo(this.guestInstanceId));\n        }\n\n        await Promise.all(promises).finally(() => this.getCourse()).finally(() => {\n            refresher?.complete();\n        });\n    }\n\n    /**\n     * Update the course status icon and title.\n     *\n     * @param status Status to show.\n     */\n    protected updateCourseStatus(status: string): void {\n        const statusData = CoreCourseHelper.getCoursePrefetchStatusInfo(status);\n\n        this.prefetchCourseData.status = statusData.status;\n        this.prefetchCourseData.icon = statusData.icon;\n        this.prefetchCourseData.statusTranslatable = statusData.statusTranslatable;\n        this.prefetchCourseData.loading = statusData.loading;\n    }\n\n    /**\n     * Wait for the user to be enrolled in the course.\n     *\n     * @param first If it's the first call (true) or it's a recursive call (false).\n     * @return Promise resolved when enrolled or timeout.\n     */\n    protected async waitForEnrolled(first?: boolean): Promise<void> {\n        if (first) {\n            this.waitStart = Date.now();\n        }\n\n        // Check if user is enrolled in the course.\n        try {\n            CoreCourses.invalidateUserCourses();\n        } catch {\n            // Ignore errors.\n        }\n\n        try {\n            await CoreCourses.getUserCourse(this.course!.id);\n        } catch {\n            // Not enrolled, wait a bit and try again.\n            if (this.pageDestroyed || (Date.now() - this.waitStart > 60000)) {\n                // Max time reached or the user left the view, stop.\n                return;\n            }\n\n            return new Promise((resolve): void => {\n                setTimeout(async () => {\n                    if (!this.pageDestroyed) {\n                        // Wait again.\n                        await this.waitForEnrolled();\n                    }\n                    resolve();\n                }, 5000);\n            });\n        }\n    }\n\n    /**\n     * Prefetch the course.\n     */\n    prefetchCourse(): void {\n        CoreCourseHelper.confirmAndPrefetchCourse(this.prefetchCourseData, this.course!).catch((error) => {\n            if (!this.pageDestroyed) {\n                CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n            }\n        });\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        this.pageDestroyed = true;\n\n        if (this.courseStatusObserver) {\n            this.courseStatusObserver.off();\n        }\n    }\n\n}\n","export default \":host {\\n  --scroll-factor: 0.5;\\n  --translate-z: calc(-2 * var(--scroll-factor))px;\\n  --scale: calc(1 + var(--scroll-factor) * 2);\\n  perspective: 1px;\\n  perspective-origin: center top;\\n  transform-style: preserve-3d;\\n}\\n:host .core-course-thumb {\\n  overflow: hidden;\\n  text-align: center;\\n  cursor: pointer;\\n  pointer-events: auto;\\n  transform-origin: center top;\\n  /**\\n   * Calculated with scroll-factor: 0.5;\\n   * translate-z: -2 * $scroll-factor px;\\n   * scale: 1 + $scroll-factor * 2;\\n   */\\n}\\n:host .core-customfieldvalue core-format-text {\\n  display: inline;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jb3JlL2ZlYXR1cmVzL2NvdXJzZS9wYWdlcy9wcmV2aWV3L3ByZXZpZXcuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG9CQUFBO0VBQ0EsZ0RBQUE7RUFDQSwyQ0FBQTtFQUVBLGdCQUFBO0VBQ0EsOEJBQUE7RUFDQSw0QkFBQTtBQUFKO0FBa0JJO0VBQ0ksZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxvQkFBQTtFQUNBLDRCQUFBO0VBRUE7Ozs7SUFBQTtBQWJSO0FBc0JJO0VBQ0ksZUFBQTtBQXBCUiIsImZpbGUiOiJzcmMvY29yZS9mZWF0dXJlcy9jb3Vyc2UvcGFnZXMvcHJldmlldy9wcmV2aWV3LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgLS1zY3JvbGwtZmFjdG9yOiAwLjU7XG4gICAgLS10cmFuc2xhdGUtejogY2FsYygtMiAqIHZhcigtLXNjcm9sbC1mYWN0b3IpKXB4O1xuICAgIC0tc2NhbGU6IGNhbGMoMSArIHZhcigtLXNjcm9sbC1mYWN0b3IpICogMik7XG5cbiAgICBwZXJzcGVjdGl2ZTogMXB4O1xuICAgIHBlcnNwZWN0aXZlLW9yaWdpbjogY2VudGVyIHRvcDtcbiAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuXG4gICAgLy8gQHRvZG8gVGhpcyBwYXJhbGxheCBlZmZlY3QgY2F1c2VkIHRoZSBpbWFnZSB0byBiZSBzY2FsZWQgZHVyaW5nIHBhZ2UgdHJhbnNpdGlvbnMsXG4gICAgLy8gYW5kIGluIHNvbWUgZGV2aWNlcyBpdCBzZWVtcyBsaWtlIHRoZSBwcm9ibGVtIHBlcnNpc3RlZCBldmVuIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxuICAgIC8vIFdlIHNob3VsZCBkZWNpZGUgd2hldGhlciB3ZSB3YW50IHRvIGtlZXAgdGhpcyBwYXJhbGxheCBvciBub3QsIGFuZCBpZiB3ZSBkbyBmaXhcbiAgICAvLyB0aGUgcHJvYmxlbSBvciBmaW5kIGFuIGFsdGVybmF0aXZlIGltcGxlbWVudGF0aW9uLiBGb3Igbm93LCBpdCdzIGRpc2FibGVkLlxuXG4gICAgLy8gLmNvcmUtY291cnNlLXRodW1iLXBhcmFsbGF4LWNvbnRlbnQge1xuICAgIC8vICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XG4gICAgLy8gICAgIC13ZWJraXQtZmlsdGVyOiBkcm9wLXNoYWRvdygwcHggLTNweCAzcHggcmdiYSh2YXIoLS1kcm9wLXNoYWRvdykpKTtcbiAgICAvLyAgICAgZmlsdGVyOiBkcm9wLXNoYWRvdygwcHggLTNweCAzcHggcmdiYSh2YXIoLS1kcm9wLXNoYWRvdykpKTtcbiAgICAvLyB9XG4gICAgLy8gLmNvcmUtY291cnNlLXRodW1iLXBhcmFsbGF4IHtcbiAgICAvLyAgICAgaGVpZ2h0OiA0MHZ3O1xuICAgIC8vICAgICBtYXgtaGVpZ2h0OiAzNXZoO1xuICAgIC8vICAgICB6LWluZGV4OiAtMTtcbiAgICAvLyAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAvLyB9XG4gICAgLmNvcmUtY291cnNlLXRodW1iIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgdG9wO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGVkIHdpdGggc2Nyb2xsLWZhY3RvcjogMC41O1xuICAgICAgICAgKiB0cmFuc2xhdGUtejogLTIgKiAkc2Nyb2xsLWZhY3RvciBweDtcbiAgICAgICAgICogc2NhbGU6IDEgKyAkc2Nyb2xsLWZhY3RvciAqIDI7XG4gICAgICAgICAqL1xuICAgICAgICAvLyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooLTFweCkgc2NhbGUoMik7XG4gICAgfVxuXG5cbiAgICAuY29yZS1jdXN0b21maWVsZHZhbHVlIGNvcmUtZm9ybWF0LXRleHQge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgfVxufVxuIl19 */\";"],"sourceRoot":"webpack:///"}